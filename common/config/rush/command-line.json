/**
 * This configuration file defines custom commands for the "rush" command-line.
 * More documentation is available on the Rush website: https://rushjs.io
 */
{
  "$schema": "https://developer.microsoft.com/json-schemas/rush/v5/command-line.schema.json",

  /**
   * Custom "commands" introduce new verbs for the command-line.  To see the help for these
   * example commands, try "rush --help", "rush my-bulk-command --help", or
   * "rush my-global-command --help".
   */
  "commands": [
    {
      "name": "format:package-json",
      "commandKind": "global",
      "summary": "Sorts all package.json files using sort-package-json",
      "autoinstallerName": "rush-command-line-tools",
      "shellCommand": "sort-package-json $(git ls-files '*package.json')"
    },
    {
      "name": "format:check",
      "commandKind": "global",
      "summary": "Runs Biome’s linting and formatting checks on the repo without modifying files.",
      "autoinstallerName": "rush-command-line-tools",
      "shellCommand": "biome check --files-ignore-unknown=true --no-errors-on-unmatched"
    },
    {
      "name": "format:check-staged",
      "commandKind": "global",
      "summary": "Runs Biome’s linting and formatting checks only on staged files without modifying files.",
      "autoinstallerName": "rush-command-line-tools",
      "shellCommand": "biome check --staged --files-ignore-unknown=true --no-errors-on-unmatched"
    },
    {
      "name": "format:check-changed",
      "commandKind": "global",
      "summary": "Runs Biome’s linting and formatting checks only on changed (according to Git) files without modifying files.",
      "autoinstallerName": "rush-command-line-tools",
      "shellCommand": "biome check --changed --files-ignore-unknown=true --no-errors-on-unmatched"
    },
    {
      "name": "format:fix",
      "commandKind": "global",
      "summary": "Runs Biome to check and automatically fix linting and formatting issues in the repo.",
      "autoinstallerName": "rush-command-line-tools",
      "shellCommand": "biome check --write --files-ignore-unknown=true --no-errors-on-unmatched"
    },
    {
      "name": "format:fix-staged",
      "commandKind": "global",
      "summary": "Runs Biome to check and automatically fix linting and formatting issues only in staged files.",
      "autoinstallerName": "rush-command-line-tools",
      "shellCommand": "biome check --write --staged --files-ignore-unknown=true --no-errors-on-unmatched"
    },
    {
      "name": "format:fix-changed",
      "commandKind": "global",
      "summary": "Runs Biome’s linting and formatting checks only on changed (according to Git) files without modifying files.",
      "autoinstallerName": "rush-command-line-tools",
      "shellCommand": "biome check --write --changed --files-ignore-unknown=true --no-errors-on-unmatched"
    },
    {
      "name": "build",
      "commandKind": "bulk",
      "summary": "Run build step for all projects in the monorepo.",
      "safeForSimultaneousRushProcesses": false,
      "enableParallelism": false,
      "allowWarningsInSuccessfulBuild": true
    },
    {
      "name": "test",
      "commandKind": "bulk",
      "summary": "Run test for all projects in the monorepo.",
      "safeForSimultaneousRushProcesses": false,
      "enableParallelism": false
    },
    {
      "name": "repo:check-dependencies",
      "commandKind": "global",
      "summary": "Checks if dependencies are declared correctly",
      "shellCommand": "node common/scripts/check-dependencies.mjs"
    },
    {
      "name": "repo:unify-deps",
      "commandKind": "global",
      "summary": "Checks if dependencies are declared correctly",
      "autoinstallerName": "rush-command-line-tools",
      "shellCommand": "zx common/scripts/unify-deps.mjs"
    },
    {
      "name": "ci:eslint-report",
      "commandKind": "bulk",
      "summary": "Used by the Github Actions to create eslint report.",
      "safeForSimultaneousRushProcesses": true,
      "enableParallelism": true
    },
    {
      "name": "common-subtree",
      "commandKind": "global",
      "summary": "Pull common subtree changes from some branch",
      "safeForSimultaneousRushProcesses": false,
      "shellCommand": "bash common/scripts/git-subtree-helper.sh"
    }
  ],
  "parameters": [
    {
      "parameterKind": "choice",
      "longName": "--cmd",
      "shortName": "-c",
      "description": "which command to do",
      "required": true,
      "associatedCommands": ["common-subtree"],
      "alternatives": [
        {
          "name": "pull",
          "description": "pull changes to common subtree"
        },
        {
          "name": "push",
          "description": "push changes to common subtree"
        },
        {
          "name": "diff",
          "description": "diff against some branch in common"
        },
        {
          "name": "subtree-add",
          "description": "Add common as subtree"
        }
      ]
    },
    {
      "parameterKind": "string",
      "longName": "--refspec",
      "shortName": "-r",
      "description": "git refspec for what to pull, such as master or name of a tag",
      "argumentName": "BRANCH_OR_TAG",
      "required": true,
      "associatedCommands": ["common-subtree"]
    }
  ]
}
